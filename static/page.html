<head>
    
    
    <body>
      
      <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
      
      <table width=100% height=100% style="font-family:Calibri Light"><tr><td width=50%> <div>
            <h1>SE1111</h1>
      
             <textarea name="paragraph_text" id = "text1" cols="50" rows="13"></textarea>
             
          </div>
                <button id = "saveComment1" onclick = "addComment()">Send</button>
             <ul id= "class">
                <li></li>
             </ul>
             </td>
             
             
             
             
             <td width=50%><div>
        
        <h1>SE2222</h1>
        
        <textarea name="paragraph_text" id = "text2"  cols="50" rows="13" ></textarea>
        
        </div>
        
        <button id = "saveComment2" onclick="addComment2()">Send</button>
        
        <ul id="class2list">
            
        </ul></td></tr></table>
      
             
             
        
           
       
    </body>     
    <script>
        window.setInterval(function(){getComment() }, 5000);
         window.setInterval(function(){getComment2() }, 5000);
        function addComment(){
          // alert('hi');
           
           fetch('http://lab3-zkucera.c9users.io:8081/api/comments1', {
            method: 'post',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({text: document.getElementById('text1').value})
        
            })
            getComment();
            getComment2();
            
        }
        
        function addComment2(){
          // alert('hi');
           
           fetch('http://lab3-zkucera.c9users.io:8081/api/comments2', {
            method: 'post',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({text: document.getElementById('text2').value})
        
            })
            getComment();
            getComment2();
        }
        
       function getComment(){
      const ul = document.getElementById("class");
      const url = 'http://lab3-zkucera.c9users.io:8081/api/comments1';

       var ull = document.getElementById("class");
        ull.innerHTML = "";

      fetch(url)
      .then((resp) => resp.json())
      .then(function(data) {
        console.log(data);
        return data.map(function(comment) {
            var li = document.createElement('li');
            if (ul.getElementsByTagName("li").length >= 20)
            {$('#class li').first().remove();}     
     
            var span = document.createElement('span');
            console.log(comment.coursecode);
            if(comment.coursecode== "SE1111"){
              span.innerHTML = comment.text;
              span.setAttribute('title', 'ID: ${bear._id}')
              li.appendChild(span);
              ul.appendChild(li);
        }
        
        
            
            
        })
      })
      .catch(function(error) {
        console.log(JSON.stringify(error));
      });
    }
     
      function getComment2(){
      const ul = document.getElementById("class2list");
      const url = 'http://lab3-zkucera.c9users.io:8081/api/comments2';

     var ulk = document.getElementById("class2list");
        ulk.innerHTML = "";

      fetch(url)
      .then((resp) => resp.json())
      .then(function(data) {
        console.log(data);
        return data.map(function(comment) {
            
            if (ul.getElementsByTagName("li").length >= 20)
            {$('#class2list li').first().remove();}   
            
            var li = document.createElement('li');
            var span = document.createElement('span');
            console.log(comment.coursecode);
            if(comment.coursecode== "SE2222"){
              span.innerHTML = comment.text;
              span.setAttribute('title', 'ID: ${bear._id}')
              li.appendChild(span);
              ul.appendChild(li);
        }
            
            
        })
      })
      .catch(function(error) {
        console.log(JSON.stringify(error));
      });
    } 
        
        
        
        
    </script>
    
</head>